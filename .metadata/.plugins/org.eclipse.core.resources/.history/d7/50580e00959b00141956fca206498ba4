package edu.rits.ma.jade.behaviour;

import java.util.List;

import edu.rits.ma.common.abstr.ITask;
import edu.rits.ma.jade.communication.CommunicationDataStore;

public class PrimaryTaskProcessorImpl implements ICommunicationDataStoreProcessor {

	private static final int ACTION_PHASE_TO_WAIT_SECONDARY_AGENTS_READY = 0;
	private static final int ACTION_PHASE_TO_PROCESS_READY_MESSAGE = 1;
	private static final int ACTION_PHASE_TO_RUN = 2;
	private static final int ACTION_PHASE_TO_WAIT_SECONDARY_AGENTS_DONE_TASK = 3;
	private static final int ACTION_PHASE_TO_WAIT_SECONDARY_AGENTS_DONE_TASK = 3;
	private static final int ACTION_PHASE_TO_STOP = 5;
	
	private int mInternalState = ACTION_PHASE_TO_WAIT_SECONDARY_AGENTS_READY;
	private List<ITask> mTasks = null;
	
	@Override
	public void processCommunicationDataStore(CommunicationDataStore communicationDataStore) {
		updateInternalState(communicationDataStore);
		try {
			int nextActionPhase = mInternalState;
			switch (mInternalState) {
			case ACTION_PHASE_TO_WAIT_SECONDARY_AGENTS_READY:
				break;
			case ACTION_PHASE_TO_PROCESS_READY_MESSAGE:
				break;
			case ACTION_PHASE_TO_RUN:
				runTasks();
				nextActionPhase = ACTION_PHASE_TO_WAIT_SECONDARY_AGENTS_DONE_TASK;
				break;
			case ACTION_PHASE_TO_WAIT_SECONDARY_AGENTS_DONE_TASK:
				waitForSubTasksOnSecondaryAgents();
				break;
			default:
				break;
			}
			mInternalState = nextActionPhase;
		} catch (Exception e) {
			e.printStackTrace();
			mInternalState = ACTION_PHASE_TO_STOP;
		}
	}

	private void updateInternalState(CommunicationDataStore communicationDataStore) {
		// TODO Auto-generated method stub
		
	}

	private void waitForSubTasksOnSecondaryAgents() {
		// TODO Auto-generated method stub
		
	}

	private void runTasks() {
		// TODO Auto-generated method stub
		
	}

}
