package behaviours;

import jade.core.AID;
import jade.core.Agent;
import jade.core.behaviours.CyclicBehaviour;
import jade.lang.acl.ACLMessage;

public class InteractiveBehaviour extends CyclicBehaviour {
	/**
	 * 
	 */
	private static final long serialVersionUID = 1832387249475523721L;

	public InteractiveBehaviour(Agent agent) {
		myAgent = agent;
		setAgent(agent);
	}

	@Override
	public void action() {
		// TODO Auto-generated method stub
		ACLMessage message = myAgent.receive();
		if(message != null) {
			String content = message.getContent();
			AID sender = message.getSender();
			System.out.println("Received message " + content + " from " + sender.getName());
			ACLMessage reply = new ACLMessage(NOTIFY_UP);
			if(content.equals("12345678")) {
				reply.setContent("Yes, your message is what I am expecting");
			}
			else {
				reply.setContent("Please try another message");
			}
			myAgent.send(reply);
		}
		else {
			block();
		}
	}
}
