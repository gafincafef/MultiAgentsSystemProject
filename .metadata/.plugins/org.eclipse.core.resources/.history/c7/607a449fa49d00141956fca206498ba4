$(document).ready(function() {
		$("#btn_agent_number").click(	
		function () {
			var table = $("#tbl_util");
			table.html("");
			var numberOfAgent = $("#txt_agent_number").val();
			
			var header = "<tr>";
			header += "<th class='empty-cell'></th>"; //Empty cell
			
			for (var i = 0; i < numberOfAgent; i++) {	
				header += "<th>";
				header += "Agent ";
				header += (i + 1);
				header += "</th>";
			}
			for (var i = 0; i < numberOfAgent; i++) {	
				header += "<th>";
				header += "Utility ";
				header += (i + 1);
				header += "</th>";
			}
		
			header += "<th class='empty-cell'></th>"; //Empty cell
			header += "</tr>";
			
			table.append(header);
			var row = createPreferenceRow(numberOfAgent, 1);
			table.append(row);
		});
		
		function createPreferenceRow(numberOfAgent, preferenceId) {
			var rowId = "preference_" + preferenceId;
			var row = "<tr>";
			row += "<td>Preference " + preferenceId + "</td>";
			
			for (var i = 0; i < numberOfAgent; i++) {	
				row += "<td>";
				row += "<input type='text'>";
				row += "</td>";
			}
			for (var i = 0; i < numberOfAgent; i++) {	
				row += "<td>";
				row += "<input type='text'>";
				row += "</td>";
			}
		
			row += "<td><input type='button' value='New preference'/></td>";
			row += "</tr>";
			var $row = $(row);
			$row.attr("id", rowId);
			return $row;
		}
});