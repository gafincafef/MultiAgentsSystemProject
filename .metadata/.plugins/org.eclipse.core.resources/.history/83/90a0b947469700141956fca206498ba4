package edu.rits.ma.jade.behaviour;

import jade.core.behaviours.CyclicBehaviour;
import edu.rits.ma.common.ITask;
import edu.rits.ma.jade.model.IResponse;
import edu.rits.ma.jade.model.ResponseImpl;

public class SecondaryAgentBehaviour extends CyclicBehaviour {

	private static final int NB_TASK_COMPLETED = 1;
	/**
	 * 
	 */
	private static final long serialVersionUID = -949869179196957814L;

	@Override
	public void action() {
		ITask task = getAssignedTask();
		if(task != null) {
			task.execute();
		}
		else {
			block();
		}
	}

	private ITask getAssignedTask() {
		return (ITask) getAgent().getO2AObject();
	}
	
	private void responseToPrimaryAgent() {
		IResponse response = new ResponseImpl();
		response.setResponseValue(NB_TASK_COMPLETED);
		getAgent().registerO2AInterface(IResponse.class, response);
	}
}
