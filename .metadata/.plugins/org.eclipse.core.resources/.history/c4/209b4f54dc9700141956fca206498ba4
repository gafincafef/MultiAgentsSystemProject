package edu.rits.ma.jade.agent;

import edu.rits.ma.jade.concurrency.ICondVarReleaser;
import edu.rits.ma.jade.dataobject.CondVar;

public class AgentOrganizer {
	public void setupAgentAndNotify(IAgentProtocol agentCallback, ICondVarReleaser condVarReleaser) {
		agentCallback.onSetupStart();
		
		try {
			agentCallback.onSetupArgumentsParsed();
		}
		catch(Exception e) {
			e.printStackTrace();
			agentCallback.onSetupArgumentsParseFailed();
		}
		
		agentCallback.onSetupEnd();
		
		CondVar agentSetupCondVar = agentCallback.getCondVarAfterSetup();
		if(condVarReleaser != null && agentSetupCondVar != null) {
			condVarReleaser.release(agentSetupCondVar);
		}
	}
}
